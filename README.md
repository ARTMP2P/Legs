# *1. Запуск виртуального окружения*
```python
    source venv/bin/activate
```
# *2. Установка библиотек*
```python
    pip install -r req.txt
```
# *3. Запуск файла*
```python
    python3 main.py
```
Данный код используется для обучения генеративно-состязательной сети (GAN) на заданном наборе данных. Он импортирует необходимые модули и функции из других файлов, определяет необходимые параметры, в том числе количество эпох обучения и размер изображения, а также создает и компилирует модели дискриминатора, генератора и GAN. Затем он запускает функцию обучения с заданными параметрами и набором данных.

Также код включает настройку работы TensorFlow с GPU для эффективного использования ресурсов вычислительной машины.

# *4. Пути и переменные*

Все значимые переменные хранятся в файле vars.py


```python
CHANEL, SIZE = 8, 1024
```
- Задается количество каналов и размер изображения
```python
n_steps, batch = 200000, 4
```
- Задается шаг и размер батча
```python
y1, y2, x1, x2 = 800, 2848, 136, 2184
```
- 
```python
lr = 0.0001
```
- 
```python
n_epochs=1
```
- Путь к файлу со списком директорий, который получается в ходе работы прарсера для каждой папки датасета
```python
dir_file_txt = 'dir/to/txt/file/with/paths.txt'
```
- Путь к файлу с переработанными путями к файлам, так же получается в ходе работы парсера датасета.
```python
dir_260_clear_file_txt = 'dir/to/txt/file/with/clear/paths.txt'
```
- 
```python
dir_model_NN = 'data_a/models'
```
- 
```python
img_test_group = 'data_a/img_test_group'
```
- 
```python
img_test = 'data_a/img_test'
```
- 
```python
root_25 = 'data_a/rendered_models'
```
- Путь к корневой папки датасета
```python
root = 'data/training_dataset/'
```

- Список ракурсов в датасете
```python
rakurs = ['yaw_0',
          'yaw_55',
          'yaw_90',
          'yaw_125',
          'yaw_180',
          'yaw_235',
          'yaw_270',
          'yaw_305']
```
# *5. Дополнительные функции:*

## 1. Парсер датасета.
Парсер предназначен для изменения размеров изображений в формате PNG, которые находятся в указанной входной директории и ее подпапках, до размеров 1024х1024 пикселей с сохранением пропорций и обрезкой до квадрата. Измененные изображения сохраняются в новых директориях, создаваемых в указанной выходной директории в соответствии с исходными директориями, содержащими файлы изображений.

Программа запускается через командную строку с помощью Python и принимает два обязательных аргумента: путь к входной директории с изображениями и путь к выходной директории для сохранения измененных изображений.

Для обработки изображений программа создает пул потоков, количество потоков равно количеству доступных процессоров, затем проходит по всем файлам PNG во входной директории и ее подпапках, добавляя задачи в пул потоков. Каждая задача заключается в изменении размера изображения и сохранении его в новой папке, соответствующей структуре исходной папки. В конце работы все потоки завершаются.

Функция process_file принимает два аргумента: путь к исходному файлу изображения и путь к директории, в которой необходимо сохранить измененное изображение. Функция resize_png изменяет размер изображения и сохраняет его в указанной директории.

Запуск:
```python
    python3 parser.py
```
## 2. АПИ для работы сервиса:
Апи расположено в корне и работает как обычно через запуск скрипта 
```python
python api.py
```
На вход принимает архив с ищображениями, сохраняет его, запускает его обработку через встроенные функции, которые находятся в папке functions и возвращает архив с обработанными изображениями.
# 5. Результат выполнения по каждой эпохе
```
3145left
3.5756945610046387 |(суммарный mIoU по всем ракурсам модели стопы)
3091right
2.9930591583251953
3200right
3.2172441482543945
287left
3.704690933227539
3122right
3.207266330718994
3057left
2.8534770011901855
```
